% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/test-interactions.R
\name{test_interactions}
\alias{test_interactions}
\title{Test animal-vessel interactions (attraction / follow) using simulations}
\usage{
test_interactions(
  animal,
  vessel,
  method = c("attract", "follow"),
  min_dist_m,
  min_duration_min,
  max_gap_min,
  sim_n = 1000,
  obs_duration_min = NULL,
  seed = NULL,
  oceanmask = NULL,
  min_locs = 6,
  anchor = "start_end",
  cores = 1,
  return_simdata = FALSE
)
}
\arguments{
\item{animal}{track_tbl. Animal segment.}

\item{vessel}{track_tbl. Vessel segment.}

\item{method}{character. "attract" or "follow".}

\item{min_dist_m}{numeric. Proximity threshold in meters.}

\item{min_duration_min}{numeric. Minimum event duration in minutes.}

\item{max_gap_min}{numeric. Maximum allowed internal gap within an event (minutes).}

\item{sim_n}{integer. Target number of simulations.}

\item{obs_duration_min}{numeric. Observed duration (minutes) for follow test.
REQUIRED if method == "follow". Should come from extract_event_segments()$meta$duration_min.}

\item{seed}{integer or NULL. Random seed.}

\item{oceanmask}{optional. Passed to simulate_tracks().}

\item{min_locs}{integer. Minimum number of locations; if nrow(animal) <= min_locs,
interpolate to min_locs + 1.}

\item{anchor}{character. Passed to simulate_tracks() (e.g., "start" or "start_end").}

\item{cores}{integer. Passed to simulate_tracks() if relevant.}

\item{return_simdata}{logical. If TRUE, return paired sim data and sim events.}
}
\value{
list with:
\itemize{
\item result: tibble (one row) with p_value and summaries
\item meta: list with n_valid, n_failed, interpolated, etc.
\item (optional) sim_pairs, sim_events: for inspection if return_simdata = TRUE
}
}
\description{
Given an animal and vessel segment (track_tbl) extracted around an observed event,
simulate animal tracks, pair them with the vessel, detect proximity events, and
compute a Monte Carlo p-value for:
\itemize{
\item "attract": probability that a null simulation produces >= 1 proximity event
\item "follow" : probability that the earliest null event has duration >= observed duration
}
}
